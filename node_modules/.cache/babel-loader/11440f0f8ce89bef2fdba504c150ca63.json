{"ast":null,"code":"class WorldModel {\n  constructor(worldWidth, worldHeight) {\n    this._width = void 0;\n    this._height = void 0;\n    this._allSnakes = void 0;\n    this._allViews = void 0;\n    // keept old parameters due to tests breaking/other problems\n    this._width = worldWidth;\n    this._height = worldHeight;\n    this._allSnakes = [];\n    this._allViews = [];\n  }\n\n  update(steps) {\n    const collidedSnakes = [];\n\n    this._allSnakes.forEach(snake => snake.move(steps));\n\n    if (this._allViews) {\n      this._allViews.forEach(view => view.display(this));\n    }\n\n    this._allSnakes.forEach(snake => {\n      if (this._allSnakes.some(otherSnake => snake.didCollide(otherSnake))) {\n        collidedSnakes.push(snake);\n      }\n    }); // Remove collided snakes from allSnakes array\n\n\n    collidedSnakes.forEach(snake => {\n      const index = this._allSnakes.indexOf(snake);\n\n      if (index !== -1) {\n        this._allSnakes.splice(index, 1);\n      }\n    });\n  }\n\n  addSnake(s) {\n    this._allSnakes.push(s);\n  }\n\n  addView(v) {\n    this._allViews.push(v);\n  }\n\n  get allSnakes() {\n    return this._allSnakes;\n  }\n\n  get width() {\n    return this._width;\n  }\n\n  get height() {\n    return this._height;\n  }\n\n}\n\nexport default WorldModel;","map":{"version":3,"sources":["/Users/roberttineo/Desktop/snake-game/src/WorldModel.ts"],"names":["WorldModel","constructor","worldWidth","worldHeight","_width","_height","_allSnakes","_allViews","update","steps","collidedSnakes","forEach","snake","move","view","display","some","otherSnake","didCollide","push","index","indexOf","splice","addSnake","s","addView","v","allSnakes","width","height"],"mappings":"AAGA,MAAMA,UAAN,CAAiB;AAMfC,EAAAA,WAAW,CAACC,UAAD,EAAqBC,WAArB,EAA0C;AAAA,SAL7CC,MAK6C;AAAA,SAJ7CC,OAI6C;AAAA,SAH7CC,UAG6C;AAAA,SAF7CC,SAE6C;AACnD;AACA,SAAKH,MAAL,GAAcF,UAAd;AACA,SAAKG,OAAL,GAAeF,WAAf;AACA,SAAKG,UAAL,GAAkB,EAAlB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACD;;AAEMC,EAAAA,MAAM,CAACC,KAAD,EAAsB;AACjC,UAAMC,cAAuB,GAAG,EAAhC;;AACA,SAAKJ,UAAL,CAAgBK,OAAhB,CAAyBC,KAAD,IAAWA,KAAK,CAACC,IAAN,CAAWJ,KAAX,CAAnC;;AACA,QAAI,KAAKF,SAAT,EAAoB;AAClB,WAAKA,SAAL,CAAeI,OAAf,CAAwBG,IAAD,IAAUA,IAAI,CAACC,OAAL,CAAa,IAAb,CAAjC;AACD;;AACD,SAAKT,UAAL,CAAgBK,OAAhB,CAAyBC,KAAD,IAAW;AACjC,UAAI,KAAKN,UAAL,CAAgBU,IAAhB,CAAsBC,UAAD,IAAgBL,KAAK,CAACM,UAAN,CAAiBD,UAAjB,CAArC,CAAJ,EAAwE;AACtEP,QAAAA,cAAc,CAACS,IAAf,CAAoBP,KAApB;AACD;AACF,KAJD,EANiC,CAYjC;;;AACAF,IAAAA,cAAc,CAACC,OAAf,CAAwBC,KAAD,IAAW;AAChC,YAAMQ,KAAK,GAAG,KAAKd,UAAL,CAAgBe,OAAhB,CAAwBT,KAAxB,CAAd;;AACA,UAAIQ,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChB,aAAKd,UAAL,CAAgBgB,MAAhB,CAAuBF,KAAvB,EAA8B,CAA9B;AACD;AACF,KALD;AAMD;;AAEMG,EAAAA,QAAQ,CAACC,CAAD,EAAW;AACxB,SAAKlB,UAAL,CAAgBa,IAAhB,CAAqBK,CAArB;AACD;;AAEMC,EAAAA,OAAO,CAACC,CAAD,EAAgB;AAC5B,SAAKnB,SAAL,CAAeY,IAAf,CAAoBO,CAApB;AACD;;AAEmB,MAATC,SAAS,GAAY;AAC9B,WAAO,KAAKrB,UAAZ;AACD;;AAEe,MAALsB,KAAK,GAAW;AACzB,WAAO,KAAKxB,MAAZ;AACD;;AAEgB,MAANyB,MAAM,GAAW;AAC1B,WAAO,KAAKxB,OAAZ;AACD;;AArDc;;AAwDjB,eAAeL,UAAf","sourcesContent":["import { Snake } from \"./Snake\";\r\nimport { IWorldView } from \"./IWorldView\";\r\n\r\nclass WorldModel {\r\n  private _width: number;\r\n  private _height: number;\r\n  private _allSnakes: Snake[];\r\n  private _allViews: IWorldView[];\r\n\r\n  constructor(worldWidth: number, worldHeight: number) {\r\n    // keept old parameters due to tests breaking/other problems\r\n    this._width = worldWidth;\r\n    this._height = worldHeight;\r\n    this._allSnakes = [];\r\n    this._allViews = [];\r\n  }\r\n\r\n  public update(steps: number): void {\r\n    const collidedSnakes: Snake[] = [];\r\n    this._allSnakes.forEach((snake) => snake.move(steps));\r\n    if (this._allViews) {\r\n      this._allViews.forEach((view) => view.display(this));\r\n    }\r\n    this._allSnakes.forEach((snake) => {\r\n      if (this._allSnakes.some((otherSnake) => snake.didCollide(otherSnake))) {\r\n        collidedSnakes.push(snake);\r\n      }\r\n    });\r\n\r\n    // Remove collided snakes from allSnakes array\r\n    collidedSnakes.forEach((snake) => {\r\n      const index = this._allSnakes.indexOf(snake);\r\n      if (index !== -1) {\r\n        this._allSnakes.splice(index, 1);\r\n      }\r\n    });\r\n  }\r\n\r\n  public addSnake(s: Snake) {\r\n    this._allSnakes.push(s);\r\n  }\r\n\r\n  public addView(v: IWorldView) {\r\n    this._allViews.push(v);\r\n  }\r\n\r\n  public get allSnakes(): Snake[] {\r\n    return this._allSnakes;\r\n  }\r\n\r\n  public get width(): number {\r\n    return this._width;\r\n  }\r\n\r\n  public get height(): number {\r\n    return this._height;\r\n  }\r\n}\r\n\r\nexport default WorldModel;\r\n"]},"metadata":{},"sourceType":"module"}